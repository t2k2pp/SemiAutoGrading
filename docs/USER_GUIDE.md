# IPA PM試験採点システム 使用方法ガイド

## 目次
1. [初期設定](#初期設定)
2. [試験の作成](#試験の作成)
3. [LLM設定](#llm設定)
4. [回答データの読み込み](#回答データの読み込み)
5. [一次採点の実行](#一次採点の実行)
6. [二次採点の実行](#二次採点の実行)
7. [結果のエクスポート](#結果のエクスポート)
8. [よくある質問](#よくある質問)

## 初期設定

### システム要件
- モダンなWebブラウザ（Chrome、Firefox、Safari、Edge）
- JavaScript有効
- 十分なストレージ容量（回答データに応じて）

### アクセス方法
1. ブラウザでアプリケーションURLにアクセス
2. ホーム画面が表示されることを確認

## 試験の作成

### 新しい試験の作成手順

1. **ナビゲーション**
   - 「試験設定」タブをクリック

2. **基本情報の入力**
   - **試験名**: 採点対象の試験名を入力（例：「IPA PM試験 2024年度秋期」）
   - **説明**: 試験の概要を入力（例：「プロジェクトマネージャ試験の午後問題」）

3. **問題の設定**
   - **ケーススタディタイトル**: 問題のケース名を入力
   - **背景説明**: 詳細な状況説明を入力（長文可能）
   - 文字数がリアルタイムで表示されます

4. **設問の追加**
   - 「設問を追加」ボタンで複数の設問を作成
   - 各設問に以下を入力：
     - **設問内容**: 具体的な質問文
     - **出題意図**: 何を評価したいかの説明
     - **配点**: その設問の満点
     - **文字制限**: 回答の文字数制限（任意）
     - **模範解答**: 期待される回答例

5. **試験の保存**
   - 「試験を作成」ボタンで保存

### サンプル試験の利用

1. **サンプル読み込み**
   - 「サンプル試験を読み込み」ボタンをクリック
   - IPA PM試験の実際の形式に基づいたサンプルが読み込まれます

2. **内容の確認**
   - 読み込まれた内容を確認し、必要に応じて編集

3. **保存**
   - 内容を確認後、「試験を作成」で保存

## LLM設定

### 対応プロバイダー

#### 1. LM Studio（推奨）
- **設定項目**:
  - エンドポイント: `http://127.0.0.1:1234/v1`
  - モデル: 使用するローカルモデル名
  - 温度: 0.1（推奨）
  - 最大トークン: 500（推奨）

#### 2. Ollama
- **設定項目**:
  - エンドポイント: `http://localhost:11434/v1`
  - モデル: `llama2`, `gemma`等
  - 温度: 0.1（推奨）

#### 3. Azure OpenAI
- **設定項目**:
  - エンドポイント: Azure OpenAIのエンドポイントURL
  - APIキー: Azureで取得したAPIキー
  - APIバージョン: `2024-02-01`
  - デプロイメントID: 作成したデプロイメント名

#### 4. Google Gemini
- **設定項目**:
  - エンドポイント: `https://generativelanguage.googleapis.com/v1beta`
  - モデル: `gemini-pro`
  - APIキー: Google AI Studioで取得したAPIキー

### 設定手順

1. **プロバイダー選択**
   - 「LLM設定」タブを開く
   - 使用するプロバイダーを選択

2. **接続情報入力**
   - エンドポイント、APIキー等を入力
   - トークン制限の有効/無効を選択

3. **接続テスト**
   - 「接続をテスト」ボタンで動作確認
   - 成功メッセージを確認

4. **設定保存**
   - 「設定を保存」で設定を保存

## 回答データの読み込み

### CSV形式の準備

**必要な列**:
```csv
student_id,question_number,answer_content
S001,問1-設問1,プロジェクト管理における...
S001,問1-設問2,要件定義では...
S002,問1-設問1,システム開発において...
```

### アップロード手順

1. **CSV読み込みページ**
   - 「CSV読み込み」タブを開く
   - 現在の試験が選択されていることを確認

2. **ファイル選択**
   - ドラッグ&ドロップまたは「ファイルを選択」
   - CSVファイルを選択

3. **データ検証**
   - システムが自動でデータを検証
   - エラーがあれば修正指示が表示

4. **読み込み完了**
   - 成功メッセージと統計情報を確認
   - 読み込まれた回答数を確認

## 一次採点の実行

### 採点前の確認

1. **データ準備確認**
   - 試験設定完了
   - 回答データ読み込み完了
   - LLM設定完了

2. **採点方針の決定**
   - 採点基準の確認（○△×の判定基準）
   - バッチサイズの設定

### 採点実行手順

1. **一次採点ページ**
   - 「一次採点」タブを開く
   - 採点対象の回答一覧を確認

2. **採点開始**
   - 「採点を開始」ボタンをクリック
   - 進捗バーで処理状況を確認

3. **結果確認**
   - 採点完了後、結果一覧を確認
   - 各回答の採点結果（○△×）と理由を確認

4. **問題の対処**
   - エラーが発生した回答の確認
   - 必要に応じて再採点実行

## 二次採点の実行

### 一次採点結果のレビュー

1. **二次採点ページ**
   - 「二次採点」タブを開く
   - 一次採点結果一覧を確認

2. **個別レビュー**
   - 各回答をクリックして詳細を確認
   - AI採点の理由と妥当性を評価

### 採点調整

1. **評価の変更**
   - 必要に応じて○△×の評価を変更
   - 点数の調整
   - 変更理由の記録

2. **一貫性の確保**
   - 同様の回答での採点基準統一
   - 疑問のある採点の再検討

3. **最終確定**
   - 全ての調整完了後、最終確定

## 結果のエクスポート

### エクスポート形式

1. **CSV形式**
   - 学生ID、問題、設問、回答、採点結果、理由
   - Excel等での後処理が可能

2. **統計情報**
   - 採点結果の分布
   - 平均点、合格率等

### エクスポート手順

1. **エクスポートページ**
   - 「エクスポート」タブを開く
   - 採点完了データの確認

2. **形式選択**
   - 出力形式を選択
   - 含める情報の選択

3. **ダウンロード**
   - 「エクスポート」ボタンでファイル生成
   - ファイルのダウンロード

## よくある質問

### Q1: サンプル試験が読み込めません
**A**: ブラウザのJavaScriptが有効になっているか確認してください。また、ページを再読み込みしてみてください。

### Q2: LLMに接続できません
**A**: 以下を確認してください：
- エンドポイントURLが正しいか
- APIキーが有効か
- ネットワーク接続が正常か
- LLMサービスが起動しているか

### Q3: CSV読み込みでエラーが出ます
**A**: CSVファイルの形式を確認してください：
- 必要な列（student_id, question_number, answer_content）があるか
- 文字エンコーディングがUTF-8か
- データに不正な文字が含まれていないか

### Q4: 採点結果がおかしいです
**A**: 以下を確認してください：
- 模範解答が適切に設定されているか
- LLMの設定（温度、モデル）が適切か
- 二次採点で調整を行ってください

### Q5: データが消えてしまいました
**A**: ブラウザのIndexedDBに保存されているため：
- ブラウザデータを削除していないか確認
- 同じブラウザ・同じドメインで確認
- 重要なデータは定期的にエクスポートしてください

### Q6: 大量のデータ処理が遅いです
**A**: 以下を試してください：
- バッチサイズを小さくする
- LLMの応答時間を確認
- 不要なタブを閉じてメモリを確保

## トラブルシューティング

### 一般的な問題

1. **動作が重い**
   - ブラウザのキャッシュをクリア
   - 他のタブを閉じる
   - PCのメモリ状況を確認

2. **データが保存されない**
   - ブラウザの設定でローカルストレージが有効か確認
   - プライベートモードを使用していないか確認

3. **LLM採点が不安定**
   - ネットワーク接続を確認
   - APIの利用制限に達していないか確認
   - 温度設定を下げてみる（0.1推奨）

### サポート

問題が解決しない場合は、以下の情報と共にお問い合わせください：
- 使用ブラウザとバージョン
- エラーメッセージ（あれば）
- 操作手順の詳細
- ブラウザコンソールのエラーログ

---

**📧 お問い合わせ**: GitHub Issues またはプロジェクト管理者まで